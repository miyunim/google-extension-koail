var searchUrl = "http://www.korail.com/servlets/pr.pr21100.sw_pr21111_i1Svt?radJobId=1&selGoYear=2013&selGoMonth=02&selGoDay=11&selGoHour=14&txtGoHour=140000&txtGoYoil=%BF%F9&txtGoStart=%BA%CE%BB%EA&txtGoEnd=%BC%AD%BF%EF&txtGoStartCode=&txtGoEndCode=&selGoTrain=00&txtSeatAttCd_4=15&txtSeatAttCd_3=00&txtSeatAttCd_2=00&txtPsgFlg_1=2&txtPsgFlg_2=0&txtPsgFlg_3=0&txtPsgFlg_4=0&txtPsgFlg_5=0&selGoSeat1=15&selGoSeat2=&txtPsgCnt1=2&txtPsgCnt2=0&txtGoPage=1&txtGoAbrdDt=20130211&selGoRoom=&useSeatFlg=&useServiceFlg=&checkStnNm=Y&txtMenuId=11&SeandYo=N&txtGoStartCode2=&txtGoEndCode2=&hidEasyTalk=#move";

function createLPSTab(code) {
  var args = {
    'url': searchUrl + code,
    'selected': true
  };
  
  try {
    chrome.tabs.create(args);
  } catch (e) {
    alert(e);
  }
}

function lpsOnClick(info, tab) {
  createLPSTab(info.selectionText);
}

// Create one test item for each context type.
var contexts = ["selection","editable"];
for (var i = 0; i < contexts.length; i++) {
  var context = contexts[i];
  var title = "%s 최저가 검색";
  var id = chrome.contextMenus.create({"title": title, "contexts":[context], "onclick": lpsOnClick});
}
